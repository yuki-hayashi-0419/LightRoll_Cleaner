# MODULE M8: Settings & Preferences

## 1. ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ¦‚è¦

| é …ç›® | å†…å®¹ |
|------|------|
| ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ID | M8 |
| ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å | Settings & Preferences |
| è²¬å‹™ | ã‚¢ãƒ—ãƒªè¨­å®šã€ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®šã€æ¨©é™ç®¡ç†ç”»é¢ |
| ä¾å­˜å…ˆ | M1, M4 |
| ä¾å­˜å…ƒ | M5, M7, M9 |

---

## 2. è¨­å®šé …ç›®

### 2.1 UserSettings
```swift
struct UserSettings: Codable {
    // ã‚¹ã‚­ãƒ£ãƒ³è¨­å®š
    var scanSettings: ScanSettings = .default

    // åˆ†æè¨­å®š
    var analysisSettings: AnalysisSettings = .default

    // é€šçŸ¥è¨­å®š
    var notificationSettings: NotificationSettings = .default

    // è¡¨ç¤ºè¨­å®š
    var displaySettings: DisplaySettings = .default

    // ãƒ—ãƒ¬ãƒŸã‚¢ãƒ è¨­å®šï¼ˆèª²é‡‘çŠ¶æ…‹ï¼‰
    var premiumStatus: PremiumStatus = .free
}

struct ScanSettings: Codable {
    var autoScanEnabled: Bool = false
    var autoScanInterval: AutoScanInterval = .weekly
    var includeVideos: Bool = true
    var includeScreenshots: Bool = true
    var includeSelfies: Bool = true
}

struct AnalysisSettings: Codable {
    var similarityThreshold: Float = 0.85
    var blurThreshold: Float = 0.3
    var minGroupSize: Int = 2
}

struct DisplaySettings: Codable {
    var gridColumns: Int = 4
    var showFileSize: Bool = true
    var showDate: Bool = true
    var sortOrder: SortOrder = .dateDescending
}

enum SortOrder: String, Codable, CaseIterable {
    case dateDescending = "æ–°ã—ã„é †"
    case dateAscending = "å¤ã„é †"
    case sizeDescending = "å®¹é‡å¤§ãã„é †"
    case sizeAscending = "å®¹é‡å°ã•ã„é †"
}

enum AutoScanInterval: String, Codable, CaseIterable {
    case daily = "æ¯æ—¥"
    case weekly = "æ¯é€±"
    case monthly = "æ¯æœˆ"
    case never = "ã—ãªã„"
}
```

---

## 3. ç”»é¢æ§‹æˆ

### 3.1 SettingsView
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [â†] è¨­å®š                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  â–  ãƒ—ãƒ¬ãƒŸã‚¢ãƒ                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸŒŸ ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ã«ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰     â”‚  â”‚
â”‚  â”‚    ã™ã¹ã¦ã®æ©Ÿèƒ½ã‚’è§£æ”¾              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                         â”‚
â”‚  â–  ã‚¹ã‚­ãƒ£ãƒ³è¨­å®š                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ è‡ªå‹•ã‚¹ã‚­ãƒ£ãƒ³           [ã‚ªãƒ•]    â”‚  â”‚
â”‚  â”‚ ã‚¹ã‚­ãƒ£ãƒ³é–“éš”           [æ¯é€±]    â”‚  â”‚
â”‚  â”‚ å‹•ç”»ã‚’å«ã‚ã‚‹           [ã‚ªãƒ³]    â”‚  â”‚
â”‚  â”‚ ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ     [ã‚ªãƒ³]    â”‚  â”‚
â”‚  â”‚ è‡ªæ’®ã‚Šã‚’å«ã‚ã‚‹         [ã‚ªãƒ³]    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                         â”‚
â”‚  â–  åˆ†æè¨­å®š                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ é¡ä¼¼åº¦ã—ãã„å€¤         [85%]     â”‚  â”‚
â”‚  â”‚ ãƒ–ãƒ¬åˆ¤å®šæ„Ÿåº¦           [æ¨™æº–]    â”‚  â”‚
â”‚  â”‚ æœ€å°ã‚°ãƒ«ãƒ¼ãƒ—ã‚µã‚¤ã‚º     [2æš]     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                         â”‚
â”‚  â–  é€šçŸ¥                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ é€šçŸ¥ã‚’è¨±å¯             [ã‚ªãƒ³]    â”‚  â”‚
â”‚  â”‚ å®¹é‡è­¦å‘Š               [ã‚ªãƒ³]    â”‚  â”‚
â”‚  â”‚ ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼           [ã‚ªãƒ•]    â”‚  â”‚
â”‚  â”‚ é™å¯‚æ™‚é–“               [22-8æ™‚]  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                         â”‚
â”‚  â–  è¡¨ç¤º                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ã‚°ãƒªãƒƒãƒ‰åˆ—æ•°           [4]       â”‚  â”‚
â”‚  â”‚ ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºè¡¨ç¤º     [ã‚ªãƒ³]    â”‚  â”‚
â”‚  â”‚ æ’®å½±æ—¥è¡¨ç¤º             [ã‚ªãƒ³]    â”‚  â”‚
â”‚  â”‚ ä¸¦ã³é †                 [æ–°ã—ã„é †]â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                         â”‚
â”‚  â–  ãã®ä»–                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ã‚´ãƒŸç®±                    [>]    â”‚  â”‚
â”‚  â”‚ æ¨©é™ã®ç®¡ç†                [>]    â”‚  â”‚
â”‚  â”‚ ãƒ˜ãƒ«ãƒ—ãƒ»ã‚µãƒãƒ¼ãƒˆ          [>]    â”‚  â”‚
â”‚  â”‚ ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼      [>]    â”‚  â”‚
â”‚  â”‚ åˆ©ç”¨è¦ç´„                  [>]    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                         â”‚
â”‚  â–  ã‚¢ãƒ—ãƒªæƒ…å ±                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ãƒãƒ¼ã‚¸ãƒ§ãƒ³                1.0.0  â”‚  â”‚
â”‚  â”‚ ãƒ“ãƒ«ãƒ‰ç•ªå·                   100  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 PermissionsView
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [â†] æ¨©é™ã®ç®¡ç†                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  â–  å†™çœŸã¸ã®ã‚¢ã‚¯ã‚»ã‚¹                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: âœ… è¨±å¯æ¸ˆã¿           â”‚  â”‚
â”‚  â”‚ [è¨­å®šã‚’é–‹ã]                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                         â”‚
â”‚  â–  é€šçŸ¥                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: âš ï¸ æœªè¨­å®š             â”‚  â”‚
â”‚  â”‚ [é€šçŸ¥ã‚’è¨±å¯ã™ã‚‹]                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                         â”‚
â”‚  â„¹ï¸ å†™çœŸã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã¯ã€ä¸è¦ãªå†™çœŸã‚’   â”‚
â”‚  æ¤œå‡ºã—ã¦ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã™ã‚‹ãŸã‚ã«å¿…è¦   â”‚
â”‚  ã§ã™ã€‚                                 â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. ä¸»è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

### 4.1 SettingsRepository
```swift
// Repositories/SettingsRepository.swift
final class SettingsRepository: SettingsRepositoryProtocol {
    private let userDefaults: UserDefaults
    private let settingsKey = "user_settings"

    func load() -> UserSettings
    func save(_ settings: UserSettings)
    func reset()
}
```

### 4.2 SettingsViewModel
```swift
// ViewModels/SettingsViewModel.swift
@MainActor
final class SettingsViewModel: ObservableObject {
    @Published var settings: UserSettings

    func updateScanSettings(_ scanSettings: ScanSettings)
    func updateAnalysisSettings(_ analysisSettings: AnalysisSettings)
    func updateNotificationSettings(_ notificationSettings: NotificationSettings)
    func updateDisplaySettings(_ displaySettings: DisplaySettings)
    func resetToDefaults()
}
```

### 4.3 PermissionManager
```swift
// Services/PermissionManager.swift
final class PermissionManager {
    func getPhotoPermissionStatus() -> PHAuthorizationStatus
    func getNotificationPermissionStatus() async -> UNAuthorizationStatus
    func requestPhotoPermission() async -> PHAuthorizationStatus
    func requestNotificationPermission() async -> Bool
    func openAppSettings()
}
```

---

## 5. ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
src/modules/Settings/
â”œâ”€â”€ Views/
â”‚   â”œâ”€â”€ SettingsView.swift
â”‚   â”œâ”€â”€ PermissionsView.swift
â”‚   â”œâ”€â”€ ScanSettingsView.swift
â”‚   â”œâ”€â”€ AnalysisSettingsView.swift
â”‚   â”œâ”€â”€ NotificationSettingsView.swift
â”‚   â”œâ”€â”€ DisplaySettingsView.swift
â”‚   â””â”€â”€ AboutView.swift
â”œâ”€â”€ ViewModels/
â”‚   â”œâ”€â”€ SettingsViewModel.swift
â”‚   â””â”€â”€ PermissionsViewModel.swift
â”œâ”€â”€ Repositories/
â”‚   â””â”€â”€ SettingsRepository.swift
â”œâ”€â”€ Models/
â”‚   â””â”€â”€ UserSettings.swift
â””â”€â”€ Subviews/
    â”œâ”€â”€ SettingsRow.swift
    â”œâ”€â”€ SettingsToggle.swift
    â””â”€â”€ SettingsPicker.swift
```

---

## 6. ã‚¿ã‚¹ã‚¯ä¸€è¦§

| ã‚¿ã‚¹ã‚¯ID | ã‚¿ã‚¹ã‚¯å | èª¬æ˜ | è¦‹ç© | ä¾å­˜ |
|----------|----------|------|------|------|
| M8-T01 | UserSettingsãƒ¢ãƒ‡ãƒ« | è¨­å®šãƒ¢ãƒ‡ãƒ«å®Œå…¨å®šç¾© | 1.5h | M1-T08 |
| M8-T02 | SettingsRepositoryå®Ÿè£… | UserDefaultsæ°¸ç¶šåŒ– | 1.5h | M8-T01 |
| M8-T03 | PermissionManagerå®Ÿè£… | æ¨©é™ç®¡ç†ã‚µãƒ¼ãƒ“ã‚¹ | 2h | M2-T02,M7-T04 |
| M8-T04 | SettingsViewModelå®Ÿè£… | è¨­å®šç”»é¢VM | 2h | M8-T02 |
| M8-T05 | PermissionsViewModel | æ¨©é™ç”»é¢VM | 1h | M8-T03 |
| M8-T06 | SettingsRow/Toggleå®Ÿè£… | è¨­å®šç”¨UIãƒ‘ãƒ¼ãƒ„ | 1.5h | M4-T03 |
| M8-T07 | SettingsViewå®Ÿè£… | ãƒ¡ã‚¤ãƒ³è¨­å®šç”»é¢ | 2.5h | M8-T04,M8-T06 |
| M8-T08 | ScanSettingsViewå®Ÿè£… | ã‚¹ã‚­ãƒ£ãƒ³è¨­å®šç”»é¢ | 1.5h | M8-T07 |
| M8-T09 | AnalysisSettingsViewå®Ÿè£… | åˆ†æè¨­å®šç”»é¢ | 1h | M8-T07 |
| M8-T10 | NotificationSettingsView | é€šçŸ¥è¨­å®šç”»é¢ | 1.5h | M8-T07,M7-T01 |
| M8-T11 | DisplaySettingsViewå®Ÿè£… | è¡¨ç¤ºè¨­å®šç”»é¢ | 1h | M8-T07 |
| M8-T12 | PermissionsViewå®Ÿè£… | æ¨©é™ç®¡ç†ç”»é¢ | 1.5h | M8-T05 |
| M8-T13 | AboutViewå®Ÿè£… | ã‚¢ãƒ—ãƒªæƒ…å ±ç”»é¢ | 1h | M4-T03 |
| M8-T14 | å˜ä½“ãƒ†ã‚¹ãƒˆä½œæˆ | Settingsæ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ | 1.5h | M8-T13 |

---

## 7. ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹

### M8-T02: SettingsRepositoryå®Ÿè£…
| ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ID | ãƒ†ã‚¹ãƒˆå†…å®¹ | æœŸå¾…çµæœ |
|----------------|------------|----------|
| M8-T02-TC01 | åˆå›èµ·å‹•æ™‚ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šãŒè¿”ã‚‹ |
| M8-T02-TC02 | è¨­å®šã®ä¿å­˜ã¨èª­ã¿è¾¼ã¿ | ä¿å­˜ã—ãŸå€¤ãŒå¾©å…ƒ |
| M8-T02-TC03 | ãƒªã‚»ãƒƒãƒˆæ©Ÿèƒ½ | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«æˆ»ã‚‹ |

### M8-T04: SettingsViewModelå®Ÿè£…
| ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ID | ãƒ†ã‚¹ãƒˆå†…å®¹ | æœŸå¾…çµæœ |
|----------------|------------|----------|
| M8-T04-TC01 | è¨­å®šå¤‰æ›´ã®æ°¸ç¶šåŒ– | å¤‰æ›´ãŒä¿å­˜ã•ã‚Œã‚‹ |
| M8-T04-TC02 | ä¸æ­£ãªå€¤ã®å…¥åŠ› | ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼ |
| M8-T04-TC03 | è¨­å®šå¤‰æ›´é€šçŸ¥ | PublisherãŒç™ºç« |

### M8-T07: SettingsViewå®Ÿè£…
| ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ID | ãƒ†ã‚¹ãƒˆå†…å®¹ | æœŸå¾…çµæœ |
|----------------|------------|----------|
| M8-T07-TC01 | è¨­å®šç”»é¢ã®è¡¨ç¤º | å…¨ã‚»ã‚¯ã‚·ãƒ§ãƒ³è¡¨ç¤º |
| M8-T07-TC02 | ãƒˆã‚°ãƒ«æ“ä½œ | è¨­å®šãŒåæ˜  |
| M8-T07-TC03 | ç”»é¢é·ç§» | å„è©³ç´°ç”»é¢ã¸é·ç§» |

---

## 8. å—ã‘å…¥ã‚Œæ¡ä»¶

- [ ] å…¨è¨­å®šé …ç›®ãŒæ­£ã—ãä¿å­˜ãƒ»å¾©å…ƒã•ã‚Œã‚‹
- [ ] è¨­å®šå¤‰æ›´ãŒå³åº§ã«ã‚¢ãƒ—ãƒªã«åæ˜ ã•ã‚Œã‚‹
- [ ] æ¨©é™çŠ¶æ…‹ãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] ã‚·ã‚¹ãƒ†ãƒ è¨­å®šã¸ã®èª˜å°ãŒæ©Ÿèƒ½ã™ã‚‹
- [ ] ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¸ã®ãƒªã‚»ãƒƒãƒˆãŒå‹•ä½œã™ã‚‹
- [ ] å…¨ç”»é¢ã§ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰å¯¾å¿œ

---

## 9. æŠ€è¡“çš„è€ƒæ…®äº‹é …

### 9.1 ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–
- UserDefaultsã§ã®è¨­å®šä¿å­˜
- Codableã«ã‚ˆã‚‹ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚º
- ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å¯¾å¿œï¼ˆå°†æ¥ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ï¼‰

### 9.2 ãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ–æ›´æ–°
```swift
// è¨­å®šå¤‰æ›´ã®ç›£è¦–
@MainActor
final class SettingsObserver: ObservableObject {
    @Published var settings: UserSettings

    init() {
        // UserDefaultsã®å¤‰æ›´ã‚’ç›£è¦–
        NotificationCenter.default.publisher(for: UserDefaults.didChangeNotification)
            .sink { [weak self] _ in
                self?.reload()
            }
            .store(in: &cancellables)
    }
}
```

### 9.3 ãƒ—ãƒ¬ãƒŸã‚¢ãƒ æ©Ÿèƒ½ã¨ã®é€£æº
- ä¸€éƒ¨è¨­å®šã¯ãƒ—ãƒ¬ãƒŸã‚¢ãƒ å°‚ç”¨
- Freeç‰ˆã§ã¯é …ç›®ã‚’ç„¡åŠ¹åŒ–è¡¨ç¤º
- ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰èª˜å°

---

*æœ€çµ‚æ›´æ–°: 2025-11-27*
