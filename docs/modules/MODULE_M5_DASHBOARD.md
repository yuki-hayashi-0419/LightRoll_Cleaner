# MODULE M5: Dashboard & Statistics

## 1. ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ¦‚è¦

| é …ç›® | å†…å®¹ |
|------|------|
| ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ID | M5 |
| ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å | Dashboard & Statistics |
| è²¬å‹™ | ãƒ›ãƒ¼ãƒ ç”»é¢ã€ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸çµ±è¨ˆã€ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—å±¥æ­´ |
| ä¾å­˜å…ˆ | M1, M2, M3, M4 |
| ä¾å­˜å…ƒ | - |

---

## 2. ç”»é¢æ§‹æˆ

### 2.1 HomeViewï¼ˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ï¼‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  LightRoll Cleaner         [è¨­å®š]      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚     Storage Overview              â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  [å††ã‚°ãƒ©ãƒ•]                 â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  64GB / 128GB ä½¿ç”¨ä¸­        â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  ğŸ“· å†™çœŸ: 42GB              â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  ğŸ—‘ï¸ è§£æ”¾å¯èƒ½: 8.5GB         â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  [ğŸ” ã‚¹ã‚­ãƒ£ãƒ³é–‹å§‹]                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                         â”‚
â”‚  â–  ã‚°ãƒ«ãƒ¼ãƒ—ä¸€è¦§                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸ“· é¡ä¼¼å†™çœŸ  â”‚  342æš  â”‚  2.1GB   â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ ğŸ¤³ è‡ªæ’®ã‚Š    â”‚  128æš  â”‚  890MB   â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ ğŸ“± ã‚¹ã‚¯ã‚·ãƒ§  â”‚  256æš  â”‚  1.2GB   â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ ğŸŒ«ï¸ ãƒ–ãƒ¬å†™çœŸ  â”‚   89æš  â”‚  520MB   â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ ğŸ¬ å¤§å®¹é‡å‹•ç”»â”‚   12æœ¬  â”‚  3.8GB   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                         â”‚
â”‚  â–  ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—å±¥æ­´                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  11/25 - 156æšå‰Šé™¤ - 1.2GBè§£æ”¾   â”‚  â”‚
â”‚  â”‚  11/20 - 89æšå‰Šé™¤ - 680MBè§£æ”¾    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 GroupListViewï¼ˆã‚°ãƒ«ãƒ¼ãƒ—ä¸€è¦§ï¼‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [â†] é¡ä¼¼å†™çœŸ                    [é¸æŠ] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â–  ã‚°ãƒ«ãƒ¼ãƒ—1 (5æš)  â˜…ãƒ™ã‚¹ãƒˆã‚·ãƒ§ãƒƒãƒˆ    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ ğŸ“·â˜… â”‚ ğŸ“·  â”‚ ğŸ“·  â”‚ ğŸ“·  â”‚ ğŸ“·  â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜      â”‚
â”‚  è§£æ”¾å¯èƒ½: 45MB                         â”‚
â”‚                                         â”‚
â”‚  â–  ã‚°ãƒ«ãƒ¼ãƒ—2 (3æš)                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚ ğŸ“·â˜… â”‚ ğŸ“·  â”‚ ğŸ“·  â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚  è§£æ”¾å¯èƒ½: 28MB                         â”‚
â”‚                                         â”‚
â”‚  ...                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ğŸ—‘ï¸ é¸æŠã—ãŸå†™çœŸã‚’å‰Šé™¤ (XXæš, XXMB)]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.3 GroupDetailViewï¼ˆã‚°ãƒ«ãƒ¼ãƒ—è©³ç´°ï¼‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [â†] ã‚°ãƒ«ãƒ¼ãƒ—è©³ç´°              [å…¨é¸æŠ] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                                     â”‚â”‚
â”‚  â”‚         [é¸æŠä¸­ã®å†™çœŸãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼]    â”‚â”‚
â”‚  â”‚                                     â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ ğŸ“·â˜… â”‚ â˜‘ï¸  â”‚ â˜‘ï¸  â”‚ â˜‘ï¸  â”‚ â˜‘ï¸  â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                         â”‚
â”‚  ğŸ“… 2024/11/25 14:32                   â”‚
â”‚  ğŸ“ 4032 x 3024                         â”‚
â”‚  ğŸ“¦ 12.5MB                              â”‚
â”‚  â­ å“è³ªã‚¹ã‚³ã‚¢: 85%                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ãƒ™ã‚¹ãƒˆã‚·ãƒ§ãƒƒãƒˆã«è¨­å®š]                 â”‚
â”‚  [ğŸ—‘ï¸ é¸æŠã—ãŸå†™çœŸã‚’å‰Šé™¤]               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. ä¸»è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

### 3.1 Viewsï¼ˆMV Pattern - ViewModelã‚’ä½¿ç”¨ã—ãªã„ï¼‰

```swift
// Views/HomeView.swift
@MainActor
struct HomeView: View {
    @Environment(PhotoScanner.self) private var scanner
    @Environment(StorageService.self) private var storageService

    @State private var viewState: ViewState = .loading
    @State private var storageInfo: StorageInfo?
    @State private var photoGroups: [PhotoGroup] = []
    @State private var cleanupHistory: [CleanupRecord] = []
    @State private var scanProgress: Double = 0.0

    enum ViewState {
        case loading
        case loaded
        case scanning(progress: Double)
        case error(String)
    }

    var body: some View { ... }
}

// Views/GroupListView.swift
@MainActor
struct GroupListView: View {
    let groupType: GroupType
    @Environment(PhotoGrouper.self) private var grouper

    @State private var groups: [PhotoGroup] = []
    @State private var selectedPhotoIds: Set<String> = []
    @State private var viewState: ViewState = .loading

    var body: some View { ... }
}

// Views/GroupDetailView.swift
@MainActor
struct GroupDetailView: View {
    let group: PhotoGroup
    @Environment(BestShotSelector.self) private var bestShotSelector

    @State private var selectedPhotoIds: Set<String> = []
    @State private var currentPhotoIndex: Int = 0
    @State private var bestShotId: String?

    var body: some View { ... }
}
```

### 3.2 Servicesï¼ˆ@Observableï¼‰

```swift
// Services/DashboardService.swift
@Observable
@MainActor
final class DashboardService {
    var isScanning: Bool = false
    var scanProgress: Double = 0.0
    var lastScanResult: ScanResult?

    func startScan() async throws -> ScanResult
    func cancelScan()
}

// Services/CleanupHistoryService.swift
@Observable
@MainActor
final class CleanupHistoryService {
    var history: [CleanupRecord] = []

    func loadHistory() async
    func recordCleanup(_ record: CleanupRecord) async
}
```

### 3.3 Use Cases
```swift
// UseCases/ScanPhotosUseCase.swift
final class ScanPhotosUseCase: ScanPhotosUseCaseProtocol {
    func execute(progress: @escaping (Double) -> Void) async throws -> ScanResult
}

// UseCases/GetStatisticsUseCase.swift
final class GetStatisticsUseCase {
    func execute() async throws -> StorageStatistics
}
```

### 3.3 Models
```swift
// Models/CleanupRecord.swift
struct CleanupRecord: Identifiable, Codable {
    let id: UUID
    let date: Date
    let deletedCount: Int
    let freedSpace: Int64
}

// Models/StorageStatistics.swift
struct StorageStatistics {
    let storageInfo: StorageInfo
    let groupSummary: [GroupType: GroupSummary]
}

struct GroupSummary {
    let count: Int
    let totalSize: Int64
    let reclaimableSize: Int64
}
```

---

## 4. ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
Sources/LightRollFeature/Dashboard/
â”œâ”€â”€ Views/
â”‚   â”œâ”€â”€ HomeView.swift
â”‚   â”œâ”€â”€ GroupListView.swift
â”‚   â””â”€â”€ GroupDetailView.swift
â”œâ”€â”€ Services/
â”‚   â”œâ”€â”€ DashboardService.swift
â”‚   â””â”€â”€ CleanupHistoryService.swift
â”œâ”€â”€ UseCases/
â”‚   â”œâ”€â”€ ScanPhotosUseCase.swift
â”‚   â””â”€â”€ GetStatisticsUseCase.swift
â”œâ”€â”€ Models/
â”‚   â”œâ”€â”€ CleanupRecord.swift
â”‚   â””â”€â”€ StorageStatistics.swift
â””â”€â”€ Subviews/
    â”œâ”€â”€ StorageOverviewCard.swift
    â”œâ”€â”€ GroupSummaryRow.swift
    â””â”€â”€ CleanupHistoryRow.swift
```

---

## 5. ã‚¿ã‚¹ã‚¯ä¸€è¦§

| ã‚¿ã‚¹ã‚¯ID | ã‚¿ã‚¹ã‚¯å | èª¬æ˜ | è¦‹ç© | ä¾å­˜ |
|----------|----------|------|------|------|
| M5-T01 | CleanupRecordãƒ¢ãƒ‡ãƒ« | å±¥æ­´ãƒ¢ãƒ‡ãƒ«å®šç¾© | 0.5h | M1-T08 |
| M5-T02 | StorageStatisticsãƒ¢ãƒ‡ãƒ« | çµ±è¨ˆãƒ¢ãƒ‡ãƒ«å®šç¾© | 0.5h | M3-T02 |
| M5-T03 | ScanPhotosUseCaseå®Ÿè£… | ã‚¹ã‚­ãƒ£ãƒ³å‡¦ç†çµ±åˆ | 2.5h | M2-T09,M3-T12 |
| M5-T04 | GetStatisticsUseCaseå®Ÿè£… | çµ±è¨ˆå–å¾—å‡¦ç† | 1.5h | M5-T02 |
| M5-T05 | HomeViewModelå®Ÿè£… | ãƒ›ãƒ¼ãƒ ç”»é¢VM | 2h | M5-T03,M5-T04 |
| M5-T06 | StorageOverviewCardå®Ÿè£… | å®¹é‡æ¦‚è¦ã‚«ãƒ¼ãƒ‰ | 2h | M4-T07 |
| M5-T07 | HomeViewå®Ÿè£… | ãƒ›ãƒ¼ãƒ ç”»é¢View | 2.5h | M5-T05,M5-T06 |
| M5-T08 | GroupListViewModelå®Ÿè£… | ä¸€è¦§ç”»é¢VM | 2h | M3-T10 |
| M5-T09 | GroupListViewå®Ÿè£… | ä¸€è¦§ç”»é¢View | 2.5h | M5-T08,M4-T08 |
| M5-T10 | GroupDetailViewModelå®Ÿè£… | è©³ç´°ç”»é¢VM | 2h | M5-T08 |
| M5-T11 | GroupDetailViewå®Ÿè£… | è©³ç´°ç”»é¢View | 2.5h | M5-T10,M4-T06 |
| M5-T12 | Navigationè¨­å®š | ç”»é¢é·ç§»ã®å®Ÿè£… | 1.5h | M5-T07,M5-T09,M5-T11 |
| M5-T13 | å˜ä½“ãƒ†ã‚¹ãƒˆä½œæˆ | Dashboardæ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ | 2h | M5-T12 |

---

## 6. ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹

### M5-T05: HomeViewModelå®Ÿè£…
| ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ID | ãƒ†ã‚¹ãƒˆå†…å®¹ | æœŸå¾…çµæœ |
|----------------|------------|----------|
| M5-T05-TC01 | ã‚¹ã‚­ãƒ£ãƒ³é–‹å§‹æ™‚ã®çŠ¶æ…‹å¤‰æ›´ | isScanning=true |
| M5-T05-TC02 | ã‚¹ã‚­ãƒ£ãƒ³å®Œäº†å¾Œã®ã‚°ãƒ«ãƒ¼ãƒ—æ›´æ–° | photoGroupsãŒæ›´æ–° |
| M5-T05-TC03 | ã‚¨ãƒ©ãƒ¼æ™‚ã®ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚° | ã‚¨ãƒ©ãƒ¼çŠ¶æ…‹ãŒè¨­å®šã•ã‚Œã‚‹ |

### M5-T07: HomeViewå®Ÿè£…
| ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ID | ãƒ†ã‚¹ãƒˆå†…å®¹ | æœŸå¾…çµæœ |
|----------------|------------|----------|
| M5-T07-TC01 | åˆæœŸè¡¨ç¤º | å®¹é‡æƒ…å ±ãŒè¡¨ç¤º |
| M5-T07-TC02 | ã‚¹ã‚­ãƒ£ãƒ³ãƒœã‚¿ãƒ³ã‚¿ãƒƒãƒ— | ã‚¹ã‚­ãƒ£ãƒ³å‡¦ç†é–‹å§‹ |
| M5-T07-TC03 | ã‚°ãƒ«ãƒ¼ãƒ—ã‚¿ãƒƒãƒ— | GroupListViewã¸é·ç§» |

### M5-T11: GroupDetailViewå®Ÿè£…
| ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ID | ãƒ†ã‚¹ãƒˆå†…å®¹ | æœŸå¾…çµæœ |
|----------------|------------|----------|
| M5-T11-TC01 | å†™çœŸé¸æŠ | é¸æŠçŠ¶æ…‹ãŒåæ˜  |
| M5-T11-TC02 | ãƒ™ã‚¹ãƒˆã‚·ãƒ§ãƒƒãƒˆå¤‰æ›´ | ã‚¢ã‚¤ã‚³ãƒ³æ›´æ–° |
| M5-T11-TC03 | å‰Šé™¤ãƒœã‚¿ãƒ³ | ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°è¡¨ç¤º |

---

## 7. å—ã‘å…¥ã‚Œæ¡ä»¶

- [ ] ãƒ›ãƒ¼ãƒ ç”»é¢ã§ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸æƒ…å ±ãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] ã‚¹ã‚­ãƒ£ãƒ³é€²æ—ãŒãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§è¡¨ç¤ºã•ã‚Œã‚‹
- [ ] ã‚°ãƒ«ãƒ¼ãƒ—ä¸€è¦§ã‹ã‚‰è©³ç´°ã¸é·ç§»ã§ãã‚‹
- [ ] ãƒ™ã‚¹ãƒˆã‚·ãƒ§ãƒƒãƒˆã®å¤‰æ›´ãŒå¯èƒ½
- [ ] ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—å±¥æ­´ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] å…¨ç”»é¢ã§ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰å¯¾å¿œ

---

## 8. æŠ€è¡“çš„è€ƒæ…®äº‹é …

### 8.1 çŠ¶æ…‹ç®¡ç†ï¼ˆMV Patternï¼‰
- ViewModelã‚’ä½¿ç”¨ã—ãªã„: çŠ¶æ…‹ã¯å…¨ã¦Viewå†…ã®@Stateã§ç®¡ç†
- @Environment: ã‚¢ãƒ—ãƒªå…¨ä½“ã§å…±æœ‰ã™ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ï¼ˆPhotoScanner, StorageServiceç­‰ï¼‰
- @Observable: ã‚µãƒ¼ãƒ“ã‚¹ã‚¯ãƒ©ã‚¹ã¯@Observableãƒã‚¯ãƒ­ã§ç›£è¦–å¯èƒ½ã«
- è¤‡é›‘ãªçŠ¶æ…‹ã¯enum ViewStateãƒ‘ã‚¿ãƒ¼ãƒ³ã§ç®¡ç†

### 8.2 ä¾å­˜æ€§æ³¨å…¥
```swift
// App Entry Point
@main
struct LightRollCleanerApp: App {
    @State private var scanner = PhotoScanner()
    @State private var storageService = StorageService()
    @State private var dashboardService = DashboardService()

    var body: some Scene {
        WindowGroup {
            HomeView()
                .environment(scanner)
                .environment(storageService)
                .environment(dashboardService)
        }
    }
}
```

### 8.3 éåŒæœŸå‡¦ç†
- .taskä¿®é£¾å­: Viewè¡¨ç¤ºæ™‚ã®åˆæœŸãƒ‡ãƒ¼ã‚¿å–å¾—ï¼ˆè‡ªå‹•ã‚­ãƒ£ãƒ³ã‚»ãƒ«å¯¾å¿œï¼‰
- .task(id:): ç‰¹å®šã®å€¤å¤‰æ›´æ™‚ã«ã‚¿ã‚¹ã‚¯å†å®Ÿè¡Œ
- .onChange(of:): çŠ¶æ…‹å¤‰æ›´æ™‚ã®å‰¯ä½œç”¨å‡¦ç†

### 8.4 ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹
- LazyVStackã§ãƒªã‚¹ãƒˆè¡¨ç¤º
- ã‚µãƒ ãƒã‚¤ãƒ«ã®é…å»¶èª­ã¿è¾¼ã¿
- å¤§é‡ãƒ‡ãƒ¼ã‚¿ã®ãƒšãƒ¼ã‚¸ãƒ³ã‚°æ¤œè¨

### 8.5 UX
- ã‚¹ã‚­ãƒ£ãƒ³ä¸­ã®ã‚­ãƒ£ãƒ³ã‚»ãƒ«æ©Ÿèƒ½
- ãƒ—ãƒ«ãƒˆã‚¥ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥å¯¾å¿œ
- ã‚¹ã‚±ãƒ«ãƒˆãƒ³ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°

---

*æœ€çµ‚æ›´æ–°: 2025-11-30ï¼ˆMV Patternã¸æ›´æ–°ã€Phase 4æº–å‚™å®Œäº†ï¼‰*
