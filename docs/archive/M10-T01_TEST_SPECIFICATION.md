# M10-T01テスト仕様書：App Store Connect準備ドキュメント検証

## タスク概要

- **タスクID**: M10-T01
- **タスク名**: App Store Connect準備ドキュメント作成
- **フェーズ**: ⑥ タスク実装（テスト生成）
- **作成日**: 2025-12-13
- **対象成果物**:
  1. `docs/CRITICAL/APP_STORE_SUBMISSION_CHECKLIST.md`
  2. `PROJECT_SUMMARY.md`（リリース情報追加）

## テストの性質

このタスクはコード実装ではなく**ドキュメント作成タスク**のため、従来のユニットテスト（関数の入出力検証）は不要です。代わりに、以下の観点でドキュメント品質を検証します：

- ドキュメントの存在確認
- 必須セクションの網羅性
- フォーマットの正確性
- 内容の一貫性
- リリース準備に必要な情報の完全性

---

## テストケース一覧

### TC-01: ドキュメント存在確認

**目的**: 必須ドキュメントが正しい場所に存在することを確認

**検証項目**:
- [ ] `docs/CRITICAL/APP_STORE_SUBMISSION_CHECKLIST.md` が存在する
- [ ] ファイルサイズが1KB以上（内容が存在する）
- [ ] UTF-8エンコーディングで読み込める

**検証方法**: Bashスクリプト自動検証

**合格基準**: ファイルが存在し、サイズが1KB以上

**重要度**: 🔴 必須

---

### TC-02: 必須セクション存在確認

**目的**: App Store提出に必要なセクションが全て網羅されていることを確認

**検証項目**:
- [ ] 概要セクション
- [ ] 提出前必須チェック項目セクション
  - [ ] アプリビルド準備
  - [ ] App Store Connect設定
  - [ ] スクリーンショット要件
  - [ ] アプリ説明文（日本語）
  - [ ] アプリ説明文（英語）
  - [ ] プライバシーポリシー
  - [ ] 審査ガイドライン対応
  - [ ] テストフライト配信
  - [ ] 最終確認
- [ ] 提出手順セクション
- [ ] よくあるリジェクト理由と対策セクション
- [ ] サポート体制セクション
- [ ] チェックリスト進捗セクション

**検証方法**: Bashスクリプト自動検証（grep検索）

**合格基準**: 全12セクションが存在する

**重要度**: 🔴 必須

---

### TC-03: チェックボックス数確認

**目的**: 十分な数のチェック項目が用意されていることを確認

**検証項目**:
- [ ] チェックボックス総数が50個以上
- [ ] チェックボックス形式が正しい（`- [ ]` 形式）

**検証方法**: Bashスクリプト自動検証（正規表現カウント）

**合格基準**: 50個以上のチェックボックスが存在

**実測結果**: 67個（合格 ✅）

**重要度**: 🟡 推奨

---

### TC-04: 重要キーワード存在確認

**目的**: App Store提出に必要なキーワードが記載されていることを確認

**検証項目**:
- [ ] Archive（ビルド関連）
- [ ] Distribution（配布関連）
- [ ] App Store Connect
- [ ] スクリーンショット
- [ ] In-App Purchase
- [ ] 審査
- [ ] プライバシーポリシー
- [ ] 1.0.0（バージョン情報）
- [ ] iOS 18.0（対象iOS）

**検証方法**: Bashスクリプト自動検証（grep検索）

**合格基準**: 全9キーワードが存在する

**重要度**: 🔴 必須

---

### TC-05: Markdown構文正確性確認

**目的**: Markdownファイルとして正しく表示されることを確認

**検証項目**:
- [ ] 見出し階層が正しい（#, ##, ### のみ使用）
- [ ] チェックボックスが正しい形式（`- [ ]`）
- [ ] リストのインデントが適切
- [ ] コードブロックが正しく閉じられている

**検証方法**:
1. Bashスクリプトによる自動検証（正規表現パターンマッチング）
2. 手動検証（VSCodeまたはXcodeでMarkdownプレビュー確認）

**合格基準**: 構文エラーなし、プレビューで正しく表示される

**重要度**: 🟡 推奨

---

### TC-06: アプリ情報の一貫性確認

**目的**: ドキュメント全体でアプリ情報が統一されていることを確認

**検証項目**:
- [ ] アプリ名: `LightRoll Cleaner`（9箇所）
- [ ] バンドルID: `com.example.LightRoll-Cleaner`（5箇所）
- [ ] バージョン: `1.0.0`
- [ ] ビルドナンバー: `1`
- [ ] 対象iOS: `iOS 18.0+`

**検証方法**: Bashスクリプト自動検証（grep -cでカウント）

**合格基準**:
- アプリ名: 5箇所以上
- バンドルID: 3箇所以上
- バージョン情報がすべて一致

**実測結果**: アプリ名9箇所、バンドルID5箇所（合格 ✅）

**重要度**: 🔴 必須

---

### TC-07: In-App Purchase設定の完全性確認

**目的**: 3つの課金プランがすべて詳細に記載されていることを確認

**検証項目**:
- [ ] Premium Monthly（月額）
  - [ ] Product ID: `com.example.LightRoll-Cleaner.premium.monthly`
  - [ ] 価格: `¥480`
- [ ] Premium Yearly（年額）
  - [ ] Product ID: `com.example.LightRoll-Cleaner.premium.yearly`
  - [ ] 価格: `¥3,800`
- [ ] Lifetime（買い切り）
  - [ ] Product ID: `com.example.LightRoll-Cleaner.premium.lifetime`
  - [ ] 価格: `¥9,800`

**検証方法**: Bashスクリプト自動検証（grep検索）

**合格基準**: 3つのProduct IDと価格がすべて記載されている

**重要度**: 🔴 必須

---

### TC-08: スクリーンショット要件の網羅性確認

**目的**: App Store提出に必要なスクリーンショットサイズが全て記載されていることを確認

**検証項目**:
- [ ] 6.9インチディスプレイ（iPhone 16 Pro Max / 15 Pro Max）
  - [ ] 解像度: 1320 x 2868 px
- [ ] 6.7インチディスプレイ（iPhone 16 Plus / 15 Plus / 14 Pro Max）
  - [ ] 解像度: 1290 x 2796 px
- [ ] 6.5インチディスプレイ（iPhone XS Max / 11 Pro Max）
  - [ ] 解像度: 1242 x 2688 px
- [ ] 5.5インチディスプレイ（iPhone 8 Plus / 7 Plus）
  - [ ] 解像度: 1242 x 2208 px

**検証方法**: Bashスクリプト自動検証（grep検索）

**合格基準**: 4つのデバイスサイズと解像度がすべて記載されている

**重要度**: 🔴 必須

---

### TC-09: 審査ガイドライン対応確認

**目的**: Appleの審査ガイドラインへの対応が記載されていることを確認

**検証項目**:
- [ ] Guideline 2.1: App Completeness
- [ ] Guideline 2.3: Accurate Metadata
- [ ] Guideline 3.1: Payments
- [ ] Guideline 4.0: Design
- [ ] Guideline 5.1.1: Privacy - Data Collection
- [ ] Guideline 5.1.2: Privacy - Data Use

**検証方法**: Bashスクリプト自動検証（grep検索）

**合格基準**: 6つのガイドラインがすべて記載されている

**重要度**: 🔴 必須

---

### TC-10: 提出手順の完全性確認

**目的**: App Store提出の6ステップが順序立てて記載されていることを確認

**検証項目**:
- [ ] Step 1: Archive作成
- [ ] Step 2: Validation
- [ ] Step 3: Upload
- [ ] Step 4: App Store Connectで設定
- [ ] Step 5: 審査待ち
- [ ] Step 6: 承認後

**検証方法**: Bashスクリプト自動検証（grep検索）

**合格基準**: 6ステップがすべて順序通りに記載されている

**重要度**: 🔴 必須

---

## 検証ツール

### 1. Bash自動検証スクリプト

**ファイルパス**: `scripts/validate_app_store_checklist.sh`

**実行方法**:
```bash
./scripts/validate_app_store_checklist.sh
```

**実行時間**: 約5秒

**検証項目**: TC-01〜TC-10（全10項目）

**出力形式**:
```
========================================
App Store提出チェックリスト検証
========================================

[Check 1/10] ドキュメント存在確認...
  ✓ PASS - ファイルが存在します
[Check 2/10] ファイルサイズ確認...
  ✓ PASS - ファイルサイズ: 18520 bytes (>1KB)
...

========================================
検証結果サマリー
========================================
総チェック数: 10
成功: 10
失敗: 0

✓ すべてのチェックが成功しました！
App Store提出チェックリストは品質基準を満たしています。
```

### 2. 手動検証ガイド

**ファイルパス**: `docs/CRITICAL/APP_STORE_CHECKLIST_VALIDATION_GUIDE.md`

**用途**: 自動検証で検出できない細かい内容を人間が確認

**検証時間**: 約30分

**検証フェーズ**:
1. ドキュメント基本検証（5分）
2. 構造・セクション検証（10分）
3. 内容の正確性検証（10分）
4. プライバシー・法的要件検証（5分）

---

## 実行結果

### 初回実行結果（2025-12-13）

**実行コマンド**:
```bash
./scripts/validate_app_store_checklist.sh
```

**結果**:
```
総チェック数: 10
成功: 10 ✅
失敗: 0
```

**詳細**:
- TC-01: ✅ PASS - ファイル存在確認
- TC-02: ✅ PASS - 必須セクション存在確認
- TC-03: ✅ PASS - チェックボックス数確認（67個）
- TC-04: ✅ PASS - 重要キーワード存在確認
- TC-05: ✅ PASS - Markdown構文正確性確認
- TC-06: ✅ PASS - アプリ情報の一貫性確認
- TC-07: ✅ PASS - In-App Purchase設定の完全性確認
- TC-08: ✅ PASS - スクリーンショット要件の網羅性確認
- TC-09: ✅ PASS - 審査ガイドライン対応確認
- TC-10: ✅ PASS - 提出手順の完全性確認

**総合判定**: ✅ 合格

---

## 品質スコアリング

### スコア計算式

```
品質スコア = (PASS数 / 総テスト数) × 100
```

### 実測スコア

```
品質スコア = (10 / 10) × 100 = 100点
```

### 判定基準

| スコア | 判定 | 対応 |
|--------|------|------|
| 90点以上 | 合格 ✅ | 次のタスクへ |
| 70〜89点 | 条件付き | 改善ループ（最大2回） |
| 70点未満 | 再実装 | 原因分析→修正 |

### 今回の判定

**100点** → ✅ **合格**

---

## 今後のメンテナンス

### 更新タイミング

1. **App Storeガイドライン更新時**: 新しいガイドラインに対応
2. **iOSバージョンアップ時**: 新しいiOSバージョンに対応
3. **アプリバージョンアップ時**: バージョン情報を更新
4. **審査でリジェクトされた場合**: リジェクト理由を追加

### 検証頻度

- **毎回提出前**: Bash自動検証スクリプト実行（必須）
- **重要な更新後**: 手動検証ガイドで詳細確認
- **定期メンテナンス**: 月次でドキュメント見直し

---

## まとめ

### 生成成果物

1. ✅ `docs/CRITICAL/APP_STORE_SUBMISSION_CHECKLIST.md`（既存）
2. ✅ `scripts/validate_app_store_checklist.sh`（新規作成）
3. ✅ `docs/CRITICAL/APP_STORE_CHECKLIST_VALIDATION_GUIDE.md`（新規作成）
4. ✅ `docs/M10-T01_TEST_SPECIFICATION.md`（本ドキュメント）

### テストケース数

- **自動テスト**: 10ケース（Bash検証スクリプト）
- **手動検証**: 4フェーズ（詳細ガイド）
- **総合**: 14の検証ポイント

### 完了判定

- [x] 自動テスト全PASS（10/10）
- [x] ドキュメント品質スコア100点
- [x] 検証ツール2種類作成
- [x] テスト仕様書作成

**結論**: M10-T01タスクの検証テスト生成は**完了**し、品質基準を満たしています。
