{
  "project": {
    "name": "LightRoll_Cleaner",
    "description": "写真・動画ライブラリのクリーンアップツール（iOS）",
    "created_at": "2025-11-27",
    "version": "0.2.0",
    "tech_stack": ["Swift", "SwiftUI", "Photos Framework", "Vision Framework", "StoreKit 2"],
    "platform": "iOS",
    "min_deployment_target": "iOS 17.0"
  },
  "current_phase": {
    "phase": "implementation_phase_1",
    "description": "Phase 1（基盤構築）進行中 - M1 6/10完了、M4 1/14完了",
    "next_phase": "implementation_phase_1_completion"
  },
  "last_session": {
    "date": "2025-11-28",
    "session_id": "impl-001",
    "completed_tasks": [
      "M1-T01: Xcodeプロジェクト作成 (112/120点)",
      "M1-T02: ディレクトリ構造整備 (111/120点)",
      "M1-T03: エラー型定義 (113/120点)",
      "M1-T05: AppConfig実装 (111/120点)",
      "M1-T06: DIコンテナ基盤 (114/120点)",
      "M1-T07: AppState実装 (115/120点)",
      "M4-T01: カラーパレット定義 (100/120点)"
    ],
    "completed_task_count": 7,
    "test_results": "63テスト全パス",
    "average_quality_score": "111点 (92.5%)",
    "in_progress_tasks": []
  },
  "next_session": {
    "recommended_start": "development_continue",
    "recommended_action": "continue_implementation",
    "start_instructions": [
      "1. CONTEXT_HANDOFF.jsonを読み、前回の状態を確認",
      "2. M1-T08（Protocol定義）から開始 - M1完了の鍵",
      "3. 必要に応じてM1-T04（ロガー）やM4-T02（タイポグラフィ）を並行実装"
    ],
    "priority_tasks": [
      "M1-T08: Protocol定義（高優先度 - M2/M3の依存元）",
      "M1-T04: ロガー実装（中優先度）",
      "M4-T02: タイポグラフィ定義（M4-T01完了で着手可能）"
    ],
    "optional_parallel_tasks": [
      "M1-T09: 拡張ユーティリティ",
      "M4-T03: グラスモーフィズム実装",
      "M4-T04: Spacing定義"
    ],
    "blockers": [],
    "prerequisites": []
  },
  "modules": {
    "completed": [],
    "in_progress": [
      {"id": "M1", "name": "Core Infrastructure", "completed_tasks": 6, "total_tasks": 10, "status": "in_progress"},
      {"id": "M4", "name": "UI Components", "completed_tasks": 1, "total_tasks": 14, "status": "in_progress"}
    ],
    "pending": [
      {"id": "M2", "name": "Photo Access & Scanning", "tasks": 12, "hours": 20.5, "status": "ready"},
      {"id": "M3", "name": "Image Analysis & Grouping", "tasks": 13, "hours": 25.5, "status": "ready"},
      {"id": "M5", "name": "Dashboard & Statistics", "tasks": 13, "hours": 24, "status": "pending"},
      {"id": "M6", "name": "Deletion & Safety", "tasks": 14, "hours": 25, "status": "pending"},
      {"id": "M7", "name": "Notifications", "tasks": 13, "hours": 17.5, "status": "pending"},
      {"id": "M8", "name": "Settings & Preferences", "tasks": 14, "hours": 21, "status": "pending"},
      {"id": "M9", "name": "Monetization", "tasks": 15, "hours": 25.5, "status": "pending"}
    ]
  },
  "implementation_phases": [
    {
      "phase": 1,
      "name": "基盤構築",
      "modules": ["M1", "M4前半"],
      "tasks": "M1-T01〜M1-T08, M4-T01〜M4-T04",
      "status": "in_progress",
      "progress": {
        "completed_tasks": 7,
        "total_tasks": 12,
        "percentage": 58
      }
    },
    {
      "phase": 2,
      "name": "データ層",
      "modules": ["M2", "M3"],
      "tasks": "M2-T01〜M2-T09, M3-T01〜M3-T12",
      "status": "pending"
    },
    {
      "phase": 3,
      "name": "UI層",
      "modules": ["M4後半", "M5"],
      "tasks": "M4-T05〜M4-T14, M5-T01〜M5-T12",
      "status": "pending"
    },
    {
      "phase": 4,
      "name": "機能完成",
      "modules": ["M6", "M8"],
      "tasks": "M6-T01〜M6-T13, M8-T01〜M8-T13",
      "status": "pending"
    },
    {
      "phase": 5,
      "name": "仕上げ",
      "modules": ["M7", "M9", "テスト"],
      "tasks": "M7-T01〜M7-T12, M9-T01〜M9-T14, 単体テスト",
      "status": "pending"
    }
  ],
  "mcp_status": {
    "installed": ["xcodebuildmcp"],
    "pending": [],
    "configured": true,
    "note": "xcodebuildmcp連携設定済み - ビルド/テスト実行に活用"
  },
  "context_optimization": {
    "last_optimized": "2025-11-28",
    "optimization_session": "opt-002",
    "session_count": 6,
    "completed_task_count": 7,
    "progress_entries_count": 5,
    "archived_tasks_count": 10,
    "archived_modules": [],
    "context_usage_estimate": "low",
    "tasks_archived_this_session": [
      "M1-T01", "M1-T02", "M1-T03", "M1-T05", "M1-T06", "M1-T07", "M4-T01"
    ],
    "next_optimization_trigger": "M1完了時 または 15タスク完了時"
  },
  "quality_metrics": {
    "total_tests": 63,
    "tests_passed": 63,
    "tests_failed": 0,
    "average_score": 111,
    "passing_threshold": 96,
    "all_tasks_passing": true
  },
  "file_structure": {
    "docs/CRITICAL": "重要ドキュメント（常時読み込み推奨）",
    "docs/modules": "モジュール仕様書（必要時に参照）",
    "docs/archive": "アーカイブ済みドキュメント",
    "LightRoll_Cleaner": "メインアプリケーションソース",
    "LightRoll_CleanerPackage": "SPM Feature Package",
    "tests": "テストコード"
  },
  "quick_reference": {
    "architecture": "docs/CRITICAL/ARCHITECTURE.md",
    "rules": "docs/CRITICAL/CORE_RULES.md",
    "tasks": "docs/TASKS.md",
    "progress": "docs/PROGRESS.md"
  },
  "dependencies": {
    "external": [
      {"name": "Google Mobile Ads SDK", "version": "latest", "module": "M9", "required": false}
    ],
    "internal": []
  },
  "known_issues": [],
  "notes": [
    "プロジェクト初期化完了（2025-11-27）",
    "設計ドキュメント完成（2025-11-27）",
    "アーキテクチャ選定完了: MVVM + Repository Pattern（2025-11-27）",
    "Phase 1実装開始（2025-11-28）",
    "7タスク完了、63テスト全パス、平均品質スコア111点（2025-11-28）",
    "コンテキスト最適化実行: 7タスクをアーカイブ、TASKS.md軽量化（2025-11-28）"
  ]
}
